fullnameOverride: virtuasoc

image:
  api:
    repository: ghcr.io/swb2019/virtuasoc-api
    tag: latest
  worker:
    repository: ghcr.io/swb2019/virtuasoc-worker
    tag: latest
  web:
    repository: ghcr.io/swb2019/virtuasoc-web
    tag: latest
  factory:
    repository: ghcr.io/swb2019/virtuasoc-factory
    tag: latest

ingress:
  enabled: true
  className: "nginx"
  hosts:
    - host: "app.virtuasoc.com"
      paths:
        - path: /api
          pathType: Prefix
          service: api
        - path: /
          pathType: Prefix
          service: web
    - host: "*.app.virtuasoc.com"
      paths:
        - path: /api
          pathType: Prefix
          service: api
        - path: /
          pathType: Prefix
          service: web
    - host: "factory.app.virtuasoc.com"
      paths:
        - path: /
          pathType: Prefix
          service: factory
  # TLS is enabled once cert-manager has issued the wildcard certificate into this secret.
  tls:
    - secretName: virtuasoc-tls
      hosts:
        - "app.virtuasoc.com"
        - "*.app.virtuasoc.com"
        - "factory.app.virtuasoc.com"

env:
  featureFactoryApp: "true"
  featureRbac: "true"
  featureEvidenceIngest: "true"
  featureEntityLinking: "true"
  featureSignals: "true"
  featureProductFactory: "true"
  featureReviewDistribution: "true"

factory:
  enabled: true

secrets:
  # We create the Kubernetes secret out-of-band (kubectl create secret ...) so secrets never live in git.
  create: false
  existingSecretName: virtuasoc-secrets

serviceAccount:
  create: true
  annotations:
    iam.gke.io/gcp-service-account: virtuasoc-gsa@virtuasoc.iam.gserviceaccount.com

gcp:
  cloudSqlProxy:
    enabled: true
    instanceConnectionName: virtuasoc:us-east1:virtuasoc-db
    privateIp: true


